{"version":3,"names":["React","useCallback","useRef","useImperativeHandle","forwardRef","findNodeHandle","processColor","requireNativeComponent","UIManager","asPath","RNPagingPdfView","NativePagingPdfView","props","ref","source","minZoom","maxZoom","edgeTapZone","backgroundColor","onError","onLayout","onLoadComplete","onPageChange","onZoomChange","onTap","onMiddleClick","style","viewRef","resetZoom","current","handle","dispatchViewManagerCommand","scrollToPage","page","animated","handlePdfError","event","nativeEvent","handlePdfLoadComplete","handlePageChange","handleZoomChange","scale","handleTap","position","handleMiddleClick","createElement","Math","max","min","pdfBackgroundColor","undefined","onPdfError","onPdfLoadComplete"],"sources":["NativePagingPdfView.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  forwardRef,\n} from 'react';\nimport {\n  findNodeHandle,\n  LayoutChangeEvent,\n  NativeSyntheticEvent,\n  processColor,\n  requireNativeComponent,\n  UIManager,\n  ViewStyle,\n} from 'react-native';\nimport { asPath } from './Util';\n\n// --- Event types ---\n\nexport type PagingPdfErrorEvent = { message: string };\n\nexport type PagingPdfLoadCompleteEvent = {\n  width: number;\n  height: number;\n  pageCount: number;\n};\n\nexport type PagingPdfPageChangeEvent = { page: number };\n\nexport type PagingPdfZoomChangeEvent = { scale: number };\n\nexport type PagingPdfTapEvent = { position: 'top' | 'bottom' | 'left' | 'right' };\n\n// --- Native Props ---\n\ntype NativePagingPdfViewProps = {\n  source: string;\n  minZoom: number;\n  maxZoom: number;\n  edgeTapZone: number;\n  pdfBackgroundColor?: ReturnType<typeof processColor>;\n\n  onLayout?: (event: LayoutChangeEvent) => void;\n  onPdfError: (event: NativeSyntheticEvent<PagingPdfErrorEvent>) => void;\n  onPdfLoadComplete: (\n    event: NativeSyntheticEvent<PagingPdfLoadCompleteEvent>\n  ) => void;\n  onPageChange: (event: NativeSyntheticEvent<PagingPdfPageChangeEvent>) => void;\n  onZoomChange: (event: NativeSyntheticEvent<PagingPdfZoomChangeEvent>) => void;\n  onTap: (event: NativeSyntheticEvent<PagingPdfTapEvent>) => void;\n  onMiddleClick: (event: NativeSyntheticEvent<{}>) => void;\n\n  style?: ViewStyle;\n};\n\n// --- Public Props ---\n\nexport type NativePagingPdfViewProps_Public = {\n  /**\n   * Path to PDF document.\n   */\n  source: string;\n\n  /**\n   * Minimum zoom level. Default: 1.\n   */\n  minZoom?: number;\n\n  /**\n   * Maximum zoom level. Default: 3.\n   */\n  maxZoom?: number;\n\n  /**\n   * Edge tap zone size as percentage (0-50). Default: 15.\n   * Left and right edges of this size will trigger scroll on tap.\n   * At page boundaries, tapping will switch to previous/next page.\n   * The remaining middle area triggers onMiddleClick.\n   */\n  edgeTapZone?: number;\n\n  /**\n   * Background color behind PDF pages. Default: white (#ffffff).\n   * Accepts any React Native color value (e.g., '#000000', 'black', 'rgb(0,0,0)').\n   */\n  backgroundColor?: string;\n\n  /**\n   * Callback when an error occurs.\n   */\n  onError?: (event: PagingPdfErrorEvent) => void;\n\n  /**\n   * Callback for measuring the native view.\n   */\n  onLayout?: (event: LayoutChangeEvent) => void;\n\n  /**\n   * Callback when PDF load completes.\n   */\n  onLoadComplete?: (event: PagingPdfLoadCompleteEvent) => void;\n\n  /**\n   * Callback when current page changes.\n   */\n  onPageChange?: (page: number) => void;\n\n  /**\n   * Callback when zoom level changes.\n   */\n  onZoomChange?: (scale: number) => void;\n\n  /**\n   * Callback when user taps on scroll zones.\n   * 'left' = left edge zone, 'right' = right edge zone\n   */\n  onTap?: (position: 'top' | 'bottom' | 'left' | 'right') => void;\n\n  /**\n   * Callback when user taps in the middle zone.\n   */\n  onMiddleClick?: () => void;\n\n  style?: ViewStyle;\n};\n\n// --- Ref type ---\n\nexport type NativePagingPdfViewRef = {\n  /**\n   * Reset zoom to default (scale = 1).\n   */\n  resetZoom: () => void;\n\n  /**\n   * Scroll to specific page.\n   */\n  scrollToPage: (page: number, animated?: boolean) => void;\n};\n\n// --- Native component ---\n\nconst RNPagingPdfView =\n  requireNativeComponent<NativePagingPdfViewProps>('RNPagingPdfView');\n\n/**\n * Native paged PDF viewer with per-page zoom support.\n *\n * This component displays PDF pages one at a time with horizontal swiping\n * between pages. Each page can be zoomed independently.\n *\n * Features:\n * - Horizontal page swiping (like a book)\n * - Per-page pinch-to-zoom\n * - Page swiping is disabled while zoomed in\n * - Double-tap to zoom in/out\n *\n * Supported platforms: iOS, Android\n */\nexport const NativePagingPdfView = forwardRef<\n  NativePagingPdfViewRef,\n  NativePagingPdfViewProps_Public\n>(function NativePagingPdfView(props, ref) {\n  const {\n    source,\n    minZoom = 1,\n    maxZoom = 3,\n    edgeTapZone = 15,\n    backgroundColor,\n    onError,\n    onLayout,\n    onLoadComplete,\n    onPageChange,\n    onZoomChange,\n    onTap,\n    onMiddleClick,\n    style,\n  } = props;\n\n  const viewRef = useRef<any>(null);\n\n  // Expose imperative methods\n  useImperativeHandle(ref, () => ({\n    resetZoom: () => {\n      if (viewRef.current) {\n        const handle = findNodeHandle(viewRef.current);\n        if (handle) {\n          UIManager.dispatchViewManagerCommand(handle, 'resetZoom', []);\n        }\n      }\n    },\n    scrollToPage: (page: number, animated = true) => {\n      if (viewRef.current) {\n        const handle = findNodeHandle(viewRef.current);\n        if (handle) {\n          UIManager.dispatchViewManagerCommand(handle, 'scrollToPage', [\n            page,\n            animated,\n          ]);\n        }\n      }\n    },\n  }));\n\n  // Event handlers\n  const handlePdfError = useCallback(\n    (event: NativeSyntheticEvent<PagingPdfErrorEvent>) => {\n      onError?.(event.nativeEvent);\n    },\n    [onError]\n  );\n\n  const handlePdfLoadComplete = useCallback(\n    (event: NativeSyntheticEvent<PagingPdfLoadCompleteEvent>) => {\n      onLoadComplete?.(event.nativeEvent);\n    },\n    [onLoadComplete]\n  );\n\n  const handlePageChange = useCallback(\n    (event: NativeSyntheticEvent<PagingPdfPageChangeEvent>) => {\n      onPageChange?.(event.nativeEvent.page);\n    },\n    [onPageChange]\n  );\n\n  const handleZoomChange = useCallback(\n    (event: NativeSyntheticEvent<PagingPdfZoomChangeEvent>) => {\n      onZoomChange?.(event.nativeEvent.scale);\n    },\n    [onZoomChange]\n  );\n\n  const handleTap = useCallback(\n    (event: NativeSyntheticEvent<PagingPdfTapEvent>) => {\n      onTap?.(event.nativeEvent.position);\n    },\n    [onTap]\n  );\n\n  const handleMiddleClick = useCallback(() => {\n    onMiddleClick?.();\n  }, [onMiddleClick]);\n\n  return (\n    <RNPagingPdfView\n      ref={viewRef}\n      source={asPath(source)}\n      minZoom={minZoom}\n      maxZoom={maxZoom}\n      edgeTapZone={Math.max(0, Math.min(50, edgeTapZone))}\n      pdfBackgroundColor={backgroundColor ? processColor(backgroundColor) : undefined}\n      onLayout={onLayout}\n      onPdfError={handlePdfError}\n      onPdfLoadComplete={handlePdfLoadComplete}\n      onPageChange={handlePageChange}\n      onZoomChange={handleZoomChange}\n      onTap={handleTap}\n      onMiddleClick={handleMiddleClick}\n      style={style}\n    />\n  );\n});\n"],"mappings":"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","ignoreList":[]}