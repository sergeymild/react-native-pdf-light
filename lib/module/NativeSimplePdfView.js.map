{"version":3,"names":["React","useCallback","useRef","useImperativeHandle","forwardRef","findNodeHandle","requireNativeComponent","UIManager","asPath","RNSimplePdfView","NativeSimplePdfView","props","ref","source","page","resizeMode","annotationStr","annotation","minZoom","maxZoom","zoomEnabled","onError","onLayout","onLoadComplete","onZoomChange","onZoomPanStart","onZoomPanEnd","onSingleTap","style","viewRef","resetZoom","current","handle","dispatchViewManagerCommand","handlePdfError","event","nativeEvent","handlePdfLoadComplete","handleZoomChange","handleZoomPanStart","_event","handleZoomPanEnd","handleSingleTap","createElement","onPdfError","onPdfLoadComplete"],"sources":["NativeSimplePdfView.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  forwardRef,\n} from 'react';\nimport {\n  findNodeHandle,\n  LayoutChangeEvent,\n  NativeSyntheticEvent,\n  requireNativeComponent,\n  UIManager,\n  ViewStyle,\n} from 'react-native';\nimport { asPath } from './Util';\n\n// --- Event types ---\n\nexport type ErrorEvent = { message: string };\n\nexport type LoadCompleteEvent = { height: number; width: number };\n\nexport type ZoomChangeEvent = {\n  scale: number;\n  offsetX: number;\n  offsetY: number;\n};\n\n// --- Native Props ---\n\ntype NativeSimplePdfViewProps = {\n  // PDF props\n  source: string;\n  page: number;\n  resizeMode?: 'contain' | 'fitWidth';\n  annotation?: string;\n  annotationStr?: string;\n\n  // Zoom props\n  minZoom: number;\n  maxZoom: number;\n  zoomEnabled: boolean;\n\n  // Events\n  onLayout?: (event: LayoutChangeEvent) => void;\n  onPdfError: (event: NativeSyntheticEvent<ErrorEvent>) => void;\n  onPdfLoadComplete: (event: NativeSyntheticEvent<LoadCompleteEvent>) => void;\n  onZoomChange: (event: NativeSyntheticEvent<ZoomChangeEvent>) => void;\n  onZoomPanStart: (event: NativeSyntheticEvent<{}>) => void;\n  onZoomPanEnd: (event: NativeSyntheticEvent<{}>) => void;\n  onSingleTap: (event: NativeSyntheticEvent<{}>) => void;\n\n  style?: ViewStyle;\n};\n\n// --- Public Props ---\n\nexport type NativeSimplePdfViewProps_Public = {\n  /**\n   * Document to display.\n   */\n  source: string;\n\n  /**\n   * Page (0-indexed) of document to display.\n   */\n  page: number;\n\n  /**\n   * How pdf page should be scaled to fit in view dimensions.\n   */\n  resizeMode?: 'contain' | 'fitWidth';\n\n  /**\n   * PAS v1 annotation JSON string.\n   */\n  annotationStr?: string;\n\n  /**\n   * Path to annotation data file.\n   */\n  annotation?: string;\n\n  /**\n   * Minimum zoom level. Default: 1.\n   */\n  minZoom?: number;\n\n  /**\n   * Maximum zoom level. Default: 3.\n   */\n  maxZoom?: number;\n\n  /**\n   * Enable/disable zoom gestures. Default: true.\n   */\n  zoomEnabled?: boolean;\n\n  /**\n   * Callback when an error occurs.\n   */\n  onError?: (event: ErrorEvent) => void;\n\n  /**\n   * Callback for measuring the native view.\n   */\n  onLayout?: (event: LayoutChangeEvent) => void;\n\n  /**\n   * Callback when PDF load completes.\n   */\n  onLoadComplete?: (event: LoadCompleteEvent) => void;\n\n  /**\n   * Callback when zoom level changes.\n   */\n  onZoomChange?: (event: ZoomChangeEvent) => void;\n\n  /**\n   * Callback when zoom pan gesture starts (user starts dragging while zoomed).\n   */\n  onZoomPanStart?: () => void;\n\n  /**\n   * Callback when zoom pan gesture ends.\n   */\n  onZoomPanEnd?: () => void;\n\n  /**\n   * Callback when a single tap is detected (not zoomed).\n   * Used for tap-to-scroll functionality.\n   */\n  onSingleTap?: () => void;\n\n  style?: ViewStyle;\n};\n\n// --- Ref type ---\n\nexport type NativeSimplePdfViewRef = {\n  /**\n   * Reset zoom to default (scale = 1).\n   */\n  resetZoom: () => void;\n};\n\n// --- Native component ---\n\nconst RNSimplePdfView =\n  requireNativeComponent<NativeSimplePdfViewProps>('RNSimplePdfView');\n\n/**\n * Lightweight native PDF view with zoom support (no drawing).\n *\n * This component renders PDF with native pinch-to-zoom capabilities.\n * Touch events for zooming are handled natively for better performance.\n *\n * Features:\n * - Pinch-to-zoom with configurable min/max\n * - Double-tap to zoom in/reset\n * - Pan when zoomed in\n * - Annotations rendering\n *\n * Use this component when you don't need drawing capabilities and want\n * a lighter-weight PDF viewer.\n *\n * Supported platforms: Android, iOS\n */\nexport const NativeSimplePdfView = forwardRef<\n  NativeSimplePdfViewRef,\n  NativeSimplePdfViewProps_Public\n>(function NativeSimplePdfView(props, ref) {\n  const {\n    source,\n    page,\n    resizeMode,\n    annotationStr,\n    annotation,\n    minZoom = 1,\n    maxZoom = 3,\n    zoomEnabled = true,\n    onError,\n    onLayout,\n    onLoadComplete,\n    onZoomChange,\n    onZoomPanStart,\n    onZoomPanEnd,\n    onSingleTap,\n    style,\n  } = props;\n\n  const viewRef = useRef<any>(null);\n\n  // Expose imperative methods\n  useImperativeHandle(ref, () => ({\n    resetZoom: () => {\n      if (viewRef.current) {\n        const handle = findNodeHandle(viewRef.current);\n        if (handle) {\n          UIManager.dispatchViewManagerCommand(handle, 'resetZoom', []);\n        }\n      }\n    },\n  }));\n\n  // Event handlers\n  const handlePdfError = useCallback(\n    (event: NativeSyntheticEvent<ErrorEvent>) => {\n      onError?.(event.nativeEvent);\n    },\n    [onError]\n  );\n\n  const handlePdfLoadComplete = useCallback(\n    (event: NativeSyntheticEvent<LoadCompleteEvent>) => {\n      onLoadComplete?.(event.nativeEvent);\n    },\n    [onLoadComplete]\n  );\n\n  const handleZoomChange = useCallback(\n    (event: NativeSyntheticEvent<ZoomChangeEvent>) => {\n      onZoomChange?.(event.nativeEvent);\n    },\n    [onZoomChange]\n  );\n\n  const handleZoomPanStart = useCallback(\n    (_event: NativeSyntheticEvent<{}>) => {\n      onZoomPanStart?.();\n    },\n    [onZoomPanStart]\n  );\n\n  const handleZoomPanEnd = useCallback(\n    (_event: NativeSyntheticEvent<{}>) => {\n      onZoomPanEnd?.();\n    },\n    [onZoomPanEnd]\n  );\n\n  const handleSingleTap = useCallback(\n    (_event: NativeSyntheticEvent<{}>) => {\n      onSingleTap?.();\n    },\n    [onSingleTap]\n  );\n\n  return (\n    <RNSimplePdfView\n      ref={viewRef}\n      source={asPath(source)}\n      page={page}\n      resizeMode={resizeMode}\n      annotation={asPath(annotation)}\n      annotationStr={annotationStr}\n      minZoom={minZoom}\n      maxZoom={maxZoom}\n      zoomEnabled={zoomEnabled}\n      onLayout={onLayout}\n      onPdfError={handlePdfError}\n      onPdfLoadComplete={handlePdfLoadComplete}\n      onZoomChange={handleZoomChange}\n      onZoomPanStart={handleZoomPanStart}\n      onZoomPanEnd={handleZoomPanEnd}\n      onSingleTap={handleSingleTap}\n      style={style}\n    />\n  );\n});\n"],"mappings":"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","ignoreList":[]}