{"version":3,"names":["React","useCallback","useRef","useImperativeHandle","forwardRef","findNodeHandle","processColor","requireNativeComponent","UIManager","asPath","RNZoomablePdfScrollView","NativeZoomablePdfScrollView","props","ref","source","minZoom","maxZoom","edgeTapZone","pdfPaddingTop","pdfPaddingBottom","backgroundColor","onError","onLayout","onLoadComplete","onPageChange","onZoomChange","onTap","onMiddleClick","style","viewRef","resetZoom","current","handle","dispatchViewManagerCommand","scrollToPage","page","animated","handlePdfError","event","nativeEvent","handlePdfLoadComplete","handlePageChange","handleZoomChange","scale","handleTap","position","handleMiddleClick","createElement","Math","max","min","pdfBackgroundColor","undefined","onPdfError","onPdfLoadComplete"],"sources":["NativeZoomablePdfScrollView.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  forwardRef,\n} from 'react';\nimport {\n  findNodeHandle,\n  LayoutChangeEvent,\n  NativeSyntheticEvent,\n  processColor,\n  requireNativeComponent,\n  UIManager,\n  ViewStyle,\n} from 'react-native';\nimport { asPath } from './Util';\n\n// --- Event types ---\n\nexport type ZoomablePdfErrorEvent = { message: string };\n\nexport type ZoomablePdfLoadCompleteEvent = {\n  width: number;\n  height: number;\n  pageCount: number;\n};\n\nexport type ZoomablePdfPageChangeEvent = { page: number };\n\nexport type ZoomablePdfZoomChangeEvent = { scale: number };\n\nexport type ZoomablePdfTapEvent = {\n  position: 'top' | 'bottom' | 'left' | 'right';\n};\n\n// --- Native Props ---\n\ntype NativeZoomablePdfScrollViewProps = {\n  source: string;\n  minZoom: number;\n  maxZoom: number;\n  edgeTapZone: number;\n  pdfPaddingTop: number;\n  pdfPaddingBottom: number;\n  pdfBackgroundColor?: ReturnType<typeof processColor>;\n\n  onLayout?: (event: LayoutChangeEvent) => void;\n  onPdfError: (event: NativeSyntheticEvent<ZoomablePdfErrorEvent>) => void;\n  onPdfLoadComplete: (\n    event: NativeSyntheticEvent<ZoomablePdfLoadCompleteEvent>\n  ) => void;\n  onPageChange: (\n    event: NativeSyntheticEvent<ZoomablePdfPageChangeEvent>\n  ) => void;\n  onZoomChange: (\n    event: NativeSyntheticEvent<ZoomablePdfZoomChangeEvent>\n  ) => void;\n  onTap: (event: NativeSyntheticEvent<ZoomablePdfTapEvent>) => void;\n  onMiddleClick: (event: NativeSyntheticEvent<{}>) => void;\n\n  style?: ViewStyle;\n};\n\n// --- Public Props ---\n\nexport type NativeZoomablePdfScrollViewProps_Public = {\n  /**\n   * Path to PDF document.\n   */\n  source: string;\n\n  /**\n   * Minimum zoom level. Default: 1.\n   */\n  minZoom?: number;\n\n  /**\n   * Maximum zoom level. Default: 3.\n   */\n  maxZoom?: number;\n\n  /**\n   * Edge tap zone size as percentage (0-50). Default: 15.\n   * Left and right edges of this size will trigger scroll on tap.\n   * The remaining middle area triggers onMiddleClick.\n   */\n  edgeTapZone?: number;\n\n  /**\n   * Background color behind PDF pages. Default: gray (#333333).\n   * Accepts any React Native color value (e.g., '#000000', 'black', 'rgb(0,0,0)').\n   */\n  backgroundColor?: string;\n\n  /**\n   * Extra padding at the top of the scroll content in points. Default: 0.\n   * Useful for adding empty space before the first page.\n   */\n  pdfPaddingTop?: number;\n\n  /**\n   * Extra padding at the bottom of the scroll content in points. Default: 0.\n   * Useful for adding empty space after the last page.\n   */\n  pdfPaddingBottom?: number;\n\n  /**\n   * Callback when an error occurs.\n   */\n  onError?: (event: ZoomablePdfErrorEvent) => void;\n\n  /**\n   * Callback for measuring the native view.\n   */\n  onLayout?: (event: LayoutChangeEvent) => void;\n\n  /**\n   * Callback when PDF load completes.\n   */\n  onLoadComplete?: (event: ZoomablePdfLoadCompleteEvent) => void;\n\n  /**\n   * Callback when current page changes.\n   */\n  onPageChange?: (page: number) => void;\n\n  /**\n   * Callback when zoom level changes.\n   */\n  onZoomChange?: (scale: number) => void;\n\n  /**\n   * Callback when user taps on scroll zones.\n   * Landscape mode: 'top' = upper half, 'bottom' = lower half\n   * Portrait mode: 'left' = left 15%, 'right' = right 15%\n   */\n  onTap?: (position: 'top' | 'bottom' | 'left' | 'right') => void;\n\n  /**\n   * Callback when user taps in the middle zone (70%) in portrait mode.\n   */\n  onMiddleClick?: () => void;\n\n  style?: ViewStyle;\n};\n\n// --- Ref type ---\n\nexport type NativeZoomablePdfScrollViewRef = {\n  /**\n   * Reset zoom to default (scale = 1).\n   */\n  resetZoom: () => void;\n\n  /**\n   * Scroll to specific page.\n   */\n  scrollToPage: (page: number, animated?: boolean) => void;\n};\n\n// --- Native component ---\n\nconst RNZoomablePdfScrollView =\n  requireNativeComponent<NativeZoomablePdfScrollViewProps>(\n    'RNZoomablePdfScrollView'\n  );\n\n/**\n * Native scrollable PDF viewer with global zoom support.\n *\n * This component displays all PDF pages in a scrollable list with\n * native UIScrollView zooming on iOS. All pages zoom together as a single unit.\n *\n * Features:\n * - Pinch-to-zoom entire document\n * - Vertical scrolling through pages\n * - Smooth native scrolling and zooming\n *\n * Supported platforms: iOS\n */\nexport const NativeZoomablePdfScrollView = forwardRef<\n  NativeZoomablePdfScrollViewRef,\n  NativeZoomablePdfScrollViewProps_Public\n>(function NativeZoomablePdfScrollView(props, ref) {\n  const {\n    source,\n    minZoom = 1,\n    maxZoom = 3,\n    edgeTapZone = 15,\n    pdfPaddingTop = 0,\n    pdfPaddingBottom = 0,\n    backgroundColor,\n    onError,\n    onLayout,\n    onLoadComplete,\n    onPageChange,\n    onZoomChange,\n    onTap,\n    onMiddleClick,\n    style,\n  } = props;\n\n  const viewRef = useRef<any>(null);\n\n  // Expose imperative methods\n  useImperativeHandle(ref, () => ({\n    resetZoom: () => {\n      if (viewRef.current) {\n        const handle = findNodeHandle(viewRef.current);\n        if (handle) {\n          UIManager.dispatchViewManagerCommand(handle, 'resetZoom', []);\n        }\n      }\n    },\n    scrollToPage: (page: number, animated = true) => {\n      if (viewRef.current) {\n        const handle = findNodeHandle(viewRef.current);\n        if (handle) {\n          UIManager.dispatchViewManagerCommand(handle, 'scrollToPage', [\n            page,\n            animated,\n          ]);\n        }\n      }\n    },\n  }));\n\n  // Event handlers\n  const handlePdfError = useCallback(\n    (event: NativeSyntheticEvent<ZoomablePdfErrorEvent>) => {\n      onError?.(event.nativeEvent);\n    },\n    [onError]\n  );\n\n  const handlePdfLoadComplete = useCallback(\n    (event: NativeSyntheticEvent<ZoomablePdfLoadCompleteEvent>) => {\n      onLoadComplete?.(event.nativeEvent);\n    },\n    [onLoadComplete]\n  );\n\n  const handlePageChange = useCallback(\n    (event: NativeSyntheticEvent<ZoomablePdfPageChangeEvent>) => {\n      onPageChange?.(event.nativeEvent.page);\n    },\n    [onPageChange]\n  );\n\n  const handleZoomChange = useCallback(\n    (event: NativeSyntheticEvent<ZoomablePdfZoomChangeEvent>) => {\n      onZoomChange?.(event.nativeEvent.scale);\n    },\n    [onZoomChange]\n  );\n\n  const handleTap = useCallback(\n    (event: NativeSyntheticEvent<ZoomablePdfTapEvent>) => {\n      onTap?.(event.nativeEvent.position);\n    },\n    [onTap]\n  );\n\n  const handleMiddleClick = useCallback(() => {\n    onMiddleClick?.();\n  }, [onMiddleClick]);\n\n  return (\n    <RNZoomablePdfScrollView\n      ref={viewRef}\n      source={asPath(source)}\n      minZoom={minZoom}\n      maxZoom={maxZoom}\n      edgeTapZone={Math.max(0, Math.min(50, edgeTapZone))}\n      pdfPaddingTop={Math.max(0, pdfPaddingTop)}\n      pdfPaddingBottom={Math.max(0, pdfPaddingBottom)}\n      pdfBackgroundColor={\n        backgroundColor ? processColor(backgroundColor) : undefined\n      }\n      onLayout={onLayout}\n      onPdfError={handlePdfError}\n      onPdfLoadComplete={handlePdfLoadComplete}\n      onPageChange={handlePageChange}\n      onZoomChange={handleZoomChange}\n      onTap={handleTap}\n      onMiddleClick={handleMiddleClick}\n      style={style}\n    />\n  );\n});\n"],"mappings":"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","ignoreList":[]}